<!DOCTYPE html>

<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->

<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->

<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->

<!-- BEGIN HEAD -->

<head>

	<meta charset="utf-8" />

	<title>路由器管理后台</title>

	<meta content="width=device-width, initial-scale=1.0" name="viewport" />

	<meta content="" name="description" />

	<meta content="" name="author" />

	<!-- BEGIN GLOBAL MANDATORY STYLES -->

	<link href="__PUBLIC__/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>

	<link href="__PUBLIC__/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"/>

	<link href="__PUBLIC__/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>

	<link href="__PUBLIC__/css/style-metro.css" rel="stylesheet" type="text/css"/>

	<link href="__PUBLIC__/css/style.css" rel="stylesheet" type="text/css"/>

	<link href="__PUBLIC__/css/style-responsive.css" rel="stylesheet" type="text/css"/>

	<link href="__PUBLIC__/css/default.css" rel="stylesheet" type="text/css" id="style_color"/>

	<link href="__PUBLIC__/css/uniform.default.css" rel="stylesheet" type="text/css"/>

	<!-- END GLOBAL MANDATORY STYLES -->

	<!-- BEGIN PAGE LEVEL STYLES -->

	<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/bootstrap-fileupload.css" />

	<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/jquery.gritter.css" />

	<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/chosen.css" />

	<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/select2_metro.css" />

	<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/jquery.tagsinput.css" />

	<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/clockface.css" />

	<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/bootstrap-wysihtml5.css" />

	<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/datepicker.css" />

	<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/timepicker.css" />

	<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/colorpicker.css" />

	<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/bootstrap-toggle-buttons.css" />

	<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/daterangepicker.css" />

	<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/datetimepicker.css" />

	<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/multi-select-metro.css" />

	<link href="__PUBLIC__/css/bootstrap-modal.css" rel="stylesheet" type="text/css"/>

	<!-- END PAGE LEVEL STYLES -->

	<link rel="shortcut icon" href="__PUBLIC__/image/favicon.ico" />

</head>
<!-- END HEAD -->

<!-- BEGIN BODY -->

<body class="page-header-fixed">

	<div class="page-container row-fluid">
		
		<div class="page-content">
		
			<div class="container-fluid">
				<div class="row-fluid">

					<div class="span12">

						<!-- BEGIN PORTLET-->   

						<div class="portlet box blue">


							<div class="portlet-body form">

								<!-- BEGIN FORM-->
								<form action="__URL__/toRegister" onsubmit="return checkForm();" method="post" enctype="multipart/form-data">
									<div class="control-group">
	
											<label class="control-label span2"><b class="required">*　</b>用户名:</label>
	
											<div class="controls">
	
												<input  type="text" name="username" class="span4 m-wrap">
	
												<span class="help-inline"></span>
												
											</div>
	
									</div>
									<div class="control-group">
	
											<label class="control-label span2"><b class="required">*　</b>密码:</label>
	
											<div class="controls">
	
												<input type="password" name="password" class="span4 m-wrap">
	
												<span class="help-inline"></span>
												
											</div>
	
									</div>
									<div class="control-group">
	
											<label class="control-label span2"><b class="required">*　</b>确认密码:</label>
	
											<div class="controls">
	
												<input type="password" name="repassword" class="span4 m-wrap">
												
												<span class="help-inline"></span>
	
											</div>
	
									</div>
									
									<div class="control-group">
	
											<label class="control-label span2"><b class="required">*　</b>公司民称:</label>
	
											<div class="controls">
	
												<input type="text" name="company_name" class="span4 m-wrap">
												
												<span class="help-inline"></span>
	
											</div>
	
									</div>
									<div class="control-group">
	
											<label class="control-label span2"><b class="required">*　</b>公司地址:</label>
	
											<div class="controls">
	
												<input type="text" name="address" class="span4 m-wrap">
	
												<span class="help-inline"></span>
												
											</div>
	
									</div>
									<div class="control-group">
	
											<label class="control-label span2"><b class="required">*　</b>联系人姓名:</label>
	
											<div class="controls">
	
												<input type="text" name="contact_name" class="span4 m-wrap">
	
												<span class="help-inline"></span>
												
											</div>
	
									</div>
									<div class="control-group">
	
											<label class="control-label span2"><b class="required">*　</b>联系电话:</label>
	
											<div class="controls">
	
												<input type="text" name="contact_phone" class="span4 m-wrap">
												
												<span class="help-inline"></span>
	
											</div>
	
									</div>
									<div class="control-group">
	
											<label class="control-label span2"><b class="required">*　</b>机构代码:</label>
	
											<div class="controls">
	
												<input type="text" name="organization_code" class="span4 m-wrap">
	
												<span class="help-inline"></span>
												
											</div>
	
									</div>

									<div class="control-group">

										<label class="control-label span2"><b class="required">*　</b>组织机构证: </label>

										<div class="controls">

											<div class="fileupload fileupload-new" data-provides="fileupload">

												<div class="fileupload-new thumbnail" style="width: 200px; height: 150px;">

													<img src="" alt="" />
													
													<span class="help-inline">在这里查看您上传图片的预览效果</span>
													
												</div>

												<div class="fileupload-preview fileupload-exists thumbnail" style="max-width: 200px; max-height: 150px; line-height: 20px;"></div>

												<div style="margin-left:128px">

													<span class="btn btn-file"><span class="fileupload-new">选择</span>

													<span class="fileupload-exists">更改</span>

													<input type="file" name="organization_img" class="default" /></span>

													<a href="#" class="btn fileupload-exists" data-dismiss="fileupload">删除</a>

												</div>

											</div>

											<span class="label label-important"  style="margin-left:80px;">注意</span>

											<span>

												若您浏览器不兼容，可能无法显示预览图，不影响图片上传

											</span>

										</div>

									</div>
									<div class="control-group">

										<label class="control-label span2"><b class="required">*　</b>营业执照扫描件:</label>

										<div class="controls">

											<div class="fileupload fileupload-new" data-provides="fileupload">

												<div class="fileupload-new thumbnail" style="width: 200px; height: 150px;">

													<img src="" alt="" />
													
													<span class="help-inline">在这里查看您上传图片的预览效果</span>
													
												</div>

												<div class="fileupload-preview fileupload-exists thumbnail" style="max-width: 200px; max-height: 150px; line-height: 20px;"></div>

												<div  style="margin-left:128px">

													<span class="btn btn-file"><span class="fileupload-new">选择</span>

													<span class="fileupload-exists">更改</span>

													<input type="file" name="business_img" class="default" /></span>

													<a href="#" class="btn fileupload-exists" data-dismiss="fileupload">删除</a>

												</div>

											</div> 

											<span class="label label-important" style="margin-left:80px;">注意</span>

											<span>

												若您浏览器不兼容，可能无法显示预览图，不影响图片上传

											</span>

										</div>

									</div>
									
									<div class="form-actions">

										<button type="submit" class="btn blue">提交</button>


									</div>

								</form>

								<!-- END FORM-->  

							</div>

						</div>

						<!-- END PORTLET-->

					</div>

				</div>
		
			</div>
		
		</div>
		
	</div>
	
	<div class="footer">

		<div class="footer-inner">

			2015 &copy; <a href="http://www.sun-net.cn">普云技术</a>。 保留所有权

		</div>

		<div class="footer-tools">

			<span class="go-top">

			<i class="icon-angle-up"></i>

			</span>

		</div>

	</div>

	<!-- END FOOTER -->

	<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->

	<!-- BEGIN CORE PLUGINS -->

	<script src="__PUBLIC__/js/jquery-1.10.1.min.js" type="text/javascript"></script>

	<script src="__PUBLIC__/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>

	<!-- IMPORTANT! Load jquery-ui-1.10.1.custom.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->

	<script src="__PUBLIC__/js/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>      

	<script src="__PUBLIC__/js/bootstrap.min.js" type="text/javascript"></script>

	<!--[if lt IE 9]>

	<script src="__PUBLIC__/js/excanvas.min.js"></script>

	<script src="__PUBLIC__/js/respond.min.js"></script>  

	<![endif]-->   

	<script src="__PUBLIC__/js/jquery.slimscroll.min.js" type="text/javascript"></script>

	<script src="__PUBLIC__/js/jquery.blockui.min.js" type="text/javascript"></script>  

	<script src="__PUBLIC__/js/jquery.cookie.min.js" type="text/javascript"></script>

	<script src="__PUBLIC__/js/jquery.uniform.min.js" type="text/javascript" ></script>

	<!-- END CORE PLUGINS -->

	<!-- BEGIN PAGE LEVEL PLUGINS -->

	<script type="text/javascript" src="__PUBLIC__/js/ckeditor.js"></script>  

	<script type="text/javascript" src="__PUBLIC__/js/bootstrap-fileupload.js"></script>

	<script type="text/javascript" src="__PUBLIC__/js/chosen.jquery.min.js"></script>

	<script type="text/javascript" src="__PUBLIC__/js/select2.min.js"></script>

	<script type="text/javascript" src="__PUBLIC__/js/wysihtml5-0.3.0.js"></script> 

	<script type="text/javascript" src="__PUBLIC__/js/bootstrap-wysihtml5.js"></script>

	<script type="text/javascript" src="__PUBLIC__/js/jquery.tagsinput.min.js"></script>

	<script type="text/javascript" src="__PUBLIC__/js/jquery.toggle.buttons.js"></script>

	<script type="text/javascript" src="__PUBLIC__/js/bootstrap-datepicker.js"></script>

	<script type="text/javascript" src="__PUBLIC__/js/bootstrap-datetimepicker.js"></script>

	<script type="text/javascript" src="__PUBLIC__/js/clockface.js"></script>

	<script type="text/javascript" src="__PUBLIC__/js/date.js"></script>

	<script type="text/javascript" src="__PUBLIC__/js/daterangepicker.js"></script> 

	<script type="text/javascript" src="__PUBLIC__/js/bootstrap-colorpicker.js"></script>  

	<script type="text/javascript" src="__PUBLIC__/js/bootstrap-timepicker.js"></script>

	<script type="text/javascript" src="__PUBLIC__/js/jquery.inputmask.bundle.min.js"></script>   

	<script type="text/javascript" src="__PUBLIC__/js/jquery.input-ip-address-control-1.0.min.js"></script>

	<script type="text/javascript" src="__PUBLIC__/js/jquery.multi-select.js"></script>   

	<script src="__PUBLIC__/js/bootstrap-modal.js" type="text/javascript" ></script>

	<script src="__PUBLIC__/js/bootstrap-modalmanager.js" type="text/javascript" ></script> 

	<!-- END PAGE LEVEL PLUGINS -->

	<!-- BEGIN PAGE LEVEL SCRIPTS -->

	<script src="__PUBLIC__/js/app.js"></script>

	<script src="__PUBLIC__/js/form-components.js"></script>     

	<!-- END PAGE LEVEL SCRIPTS -->

	<script>
		NAME = false;
		PASS = false;
		REPASS = false;
		CODE = false;
		COMNAME = false;
		UNAME = false;
		ADDRESS = false;
		CPHONE = false;
		jQuery(document).ready(function() {       
			
		   // initiate layout and plugins

		   App.init();

		   FormComponents.init();
		   
		   $("input[name='username']").blur(function(){
			   var username = $(this).val();
			   var e = $(this);
			   if(username.length<6){
				   NAME = false;
				   e.css('border','1px solid red');
	    		   e.next().addClass('alert-error').text('用户名过于简单');
	    		   return false;
			   }
			   
			   var data;
			   data = 'name='+username
			   $.ajax({
				   url:'/Route/index.php/Api/checkUserUnique',
			       type:'post',
			       dataType:'json',
			       data:data,
			       success:function(json){
			    	  
			    	   if(json.state==1){
			    		  	NAME = false;
			    		   e.css('border','1px solid red')
			    		   e.next().removeClass('alert-success').addClass('alert-error').text(json.msg)
			   			}else{
			   				NAME = true;
			   				e.css('border','1px solid green')
			   				e.next().removeClass('alert-error').addClass('alert-success').text(json.msg)
			   			}
			       },
			       error:function(){
			    	   console.log('服务器错误');
			       }
			   })
		   })
		   
		   $("input[name='password']").blur(function(){
			   var password = $(this).val();
			   var e = $(this);
			   if(password.length<6){
				   PASS = false;
				   e.css('border','1px solid red');
	    		   e.next().removeClass('alert-success').addClass('alert-error').text('密码过于简单');
	    		   return false;
			   }else{
				   PASS = true;
				   e.css('border','1px solid green');
	    		   e.next().removeClass('alert-error').empty();
	    		   return false;
			   }
			   
		   });
		   
		   $("input[name='repassword']").blur(function(){
			   var repassword = $(this).val();
			   var password = $("input[name='password']").val()
			   var e = $(this);
			   if(repassword!=password){
				   REPASS = false;
				   e.css('border','1px solid red');
	    		   e.next().removeClass('alert-success').addClass('alert-error').text('两次密码不一致');
	    		   return false;
			   }else{
				   REPASS = true;
				   e.css('border','1px solid green');
	    		   e.next().removeClass('alert-error').empty();
	    		   return false;
			   }
			   
		   });
		   
		   
		   $("input[name='company_name']").blur(function(){
			   var company_name = $(this).val();
			   var e = $(this);
			   if(company_name.length<3){
				   COMNAME = false;
				   e.css('border','1px solid red');
	    		   e.next().removeClass('alert-success').addClass('alert-error').text('请输入正确的公司名称');
	    		   return false;
			   }
			   var data;
			   data = 'company='+company_name
			   $.ajax({
				   url:'/Route/index.php/Api/checkCompanyUnique',
			       type:'post',
			       dataType:'json',
			       data:data,
			       success:function(json){
			    	  
			    	   if(json.state==1){
			    		  	COMNAME = false;
			    		   e.css('border','1px solid red')
			    		   e.next().removeClass('alert-success').addClass('alert-error').text(json.msg)
			   			}else{
			   				COMNAME = true;
			   				e.css('border','1px solid green')
			   				e.next().removeClass('alert-error').addClass('alert-success').text(json.msg)
			   			}
			       },
			       error:function(){
			    	   console.log('服务器错误');
			       }
			   })
			   
		   });
		  
		   $("input[name='address']").blur(function(){
			   var address = $(this).val();
			   var e = $(this);
			   if(address.length<3){
				   ADDRESS = false;
				   e.css('border','1px solid red');
	    		   e.next().removeClass('alert-success').addClass('alert-error').text('请输入正确的公司地址');
	    		   return false;
			   }else{
				   ADDRESS = true;
				   e.css('border','1px solid green');
	    		   e.next().removeClass('alert-error').empty();
	    		   return false;
			   }
			   
		   });
		   
		   $("input[name='contact_name']").blur(function(){
			   var contact_name = $(this).val();
			   var e = $(this);
			   if(contact_name.length == 0){
				   UNAME = false;
				   e.css('border','1px solid red');
	    		   e.next().removeClass('alert-success').addClass('alert-error').text('请输入正确的姓名');
	    		   return false;
			   }else{
				   UNAME = true;
				   e.css('border','1px solid green');
	    		   e.next().removeClass('alert-error').empty();
	    		   return false;
			   }
			   
		   });
		  
		   $("input[name='contact_phone']").blur(function(){
			   var phone = $(this).val();
			   var e = $(this);
			   var preg = /^1[3|4|5|8]{1}[0-9]{9}$/;
			   if(!preg.test(phone)){
				   CPHONE = false;
				   e.css('border','1px solid red');
	    		   e.next().removeClass('alert-success').addClass('alert-error').text('请输入正确的手机号码');
	    		   return false;
			   }else{
				   CPHONE = true;
				   e.css('border','1px solid green');
	    		   e.next().removeClass('alert-error').empty();
	    		   return false;
			   }
			   
		   });
		   
		   $("input[name='organization_code']").blur(function(){
			   var organization_code = $(this).val();
			   var e = $(this);
			   var preg = /^1[3|4|5|8]{1}[0-9]{9}$/;
			   if(organization_code.length<8){
				   CODE = false;
				   e.css('border','1px solid red');
	    		   e.next().removeClass('alert-success').addClass('alert-error').text('请输入正确的组织机构代码');
	    		   return false;
			   }else{
				   CODE = true;
				   e.css('border','1px solid green');
	    		   e.next().removeClass('alert-error').empty();
	    		   return false;
			   }
			   
		   });

		});
		function checkForm(){
			
			
			if(NAME && CPHONE && CODE && COMNAME && UNAME && PASS && REPASS &&ADDRESS){
				return true;
			}else{
				alert('请完整正确填写您的信息');
				return false;
			}
		}
	</script>

	<!-- END JAVASCRIPTS -->   

<!-- END BODY -->
<style>
	.container-fluid{
		padding:0;
	}
	body{
		width:80%;
		margin: 0 auto;
	}
	label.span2{
	
		text-align: right;
		padding-right: 20px;
	}
	.warning{
		border: 1px solid red;
	}
	.ok{
		border: 1px solid green;
	}
</style>
</html>

	
</body>
		