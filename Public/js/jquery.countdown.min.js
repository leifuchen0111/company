(function(a){function b(){this.regional=[];this.regional[""]={labels:["Years","Months","Weeks","Days","Hours","Minutes","Seconds"],labels1:["Year","Month","Week","Day","Hour","Minute","Second"],compactLabels:["y","m","w","d"],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:false};this._defaults={until:null,since:null,timezone:null,serverSync:null,format:"dHMS",layout:"",compact:false,significant:0,description:"",expiryUrl:"",expiryText:"",alwaysExpire:false,onExpiry:null,onTick:null,tickInterval:1};a.extend(this._defaults,this.regional[""]);this._serverSyncs=[];function o(q){var p=(q<1000000000000?(p=performance.now?(performance.now()+performance.timing.navigationStart):Date.now()):q||new Date().getTime());if(p-m>=1000){i._updateTargets();m=p}n(o)}var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null;var m=0;if(!n||a.noRequestAnimationFrame){a.noRequestAnimationFrame=null;setInterval(function(){i._updateTargets()},980)}else{m=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||new Date().getTime();n(o)}}var l=0;var h=1;var k=2;var c=3;var e=4;var g=5;var j=6;a.extend(b.prototype,{markerClassName:"hasCountdown",propertyName:"countdown",_rtlClass:"countdown_rtl",_sectionClass:"countdown_section",_amountClass:"countdown_amount",_rowClass:"countdown_row",_holdingClass:"countdown_holding",_showClass:"countdown_show",_descrClass:"countdown_descr",_timerTargets:[],setDefaults:function(m){this._resetExtraLabels(this._defaults,m);a.extend(this._defaults,m||{})},UTCDate:function(t,u,q,n,o,p,s,r){if(typeof u=="object"&&u.constructor==Date){r=u.getMilliseconds();s=u.getSeconds();p=u.getMinutes();o=u.getHours();n=u.getDate();q=u.getMonth();u=u.getFullYear()}var m=new Date();m.setUTCFullYear(u);m.setUTCDate(1);m.setUTCMonth(q||0);m.setUTCDate(n||1);m.setUTCHours(o||0);m.setUTCMinutes((p||0)-(Math.abs(t)<30?t*60:t));m.setUTCSeconds(s||0);m.setUTCMilliseconds(r||0);return m},periodsToSeconds:function(m){return m[0]*31557600+m[1]*2629800+m[2]*604800+m[3]*86400+m[4]*3600+m[5]*60+m[6]},_attachPlugin:function(o,n){o=a(o);if(o.hasClass(this.markerClassName)){return}var m={options:a.extend({},this._defaults),_periods:[0,0,0,0,0,0,0]};o.addClass(this.markerClassName).data(this.propertyName,m);this._optionPlugin(o,n)},_addTarget:function(m){if(!this._hasTarget(m)){this._timerTargets.push(m)}},_hasTarget:function(m){return(a.inArray(m,this._timerTargets)>-1)},_removeTarget:function(m){this._timerTargets=a.map(this._timerTargets,function(n){return(n==m?null:n)})},_updateTargets:function(){for(var m=this._timerTargets.length-1;m>=0;m--){this._updateCountdown(this._timerTargets[m])}},_optionPlugin:function(q,p,s){q=a(q);var m=q.data(this.propertyName);if(!p||(typeof p=="string"&&s==null)){var n=p;p=(m||{}).options;return(p&&n?p[n]:p)}if(!q.hasClass(this.markerClassName)){return}p=p||{};if(typeof p=="string"){var n=p;p={};p[n]=s}this._resetExtraLabels(m.options,p);var r=(m.options.timezone!=p.timezone);a.extend(m.options,p);this._adjustSettings(q,m,p.until!=null||p.since!=null||r);var o=new Date();if((m._since&&m._since<o)||(m._until&&m._until>o)){this._addTarget(q[0])}this._updateCountdown(q,m)},_updateCountdown:function(r,o){var m=a(r);o=o||m.data(this.propertyName);if(!o){return}m.html(this._generateHTML(o)).toggleClass(this._rtlClass,o.options.isRTL);if(a.isFunction(o.options.onTick)){var q=o._hold!="lap"?o._periods:this._calculatePeriods(o,o._show,o.options.significant,new Date());if(o.options.tickInterval==1||this.periodsToSeconds(q)%o.options.tickInterval==0){o.options.onTick.apply(r,[q])}}var n=o._hold!="pause"&&(o._since?o._now.getTime()<o._since.getTime():o._now.getTime()>=o._until.getTime());if(n&&!o._expiring){o._expiring=true;if(this._hasTarget(r)||o.options.alwaysExpire){this._removeTarget(r);if(a.isFunction(o.options.onExpiry)){o.options.onExpiry.apply(r,[])}if(o.options.expiryText){var p=o.options.layout;o.options.layout=o.options.expiryText;this._updateCountdown(r,o);o.options.layout=p}if(o.options.expiryUrl){window.location=o.options.expiryUrl}}o._expiring=false}else{if(o._hold=="pause"){this._removeTarget(r)}}m.data(this.propertyName,o)},_resetExtraLabels:function(m,q){var o=false;for(var p in q){if(p!="whichLabels"&&p.match(/[Ll]abels/)){o=true;break}}if(o){for(var p in m){if(p.match(/[Ll]abels[02-9]|compactLabels1/)){m[p]=null}}}},_adjustSettings:function(t,n,p){var o;var r=0;var q=null;for(var m=0;m<this._serverSyncs.length;m++){if(this._serverSyncs[m][0]==n.options.serverSync){q=this._serverSyncs[m][1];break}}if(q!=null){r=(n.options.serverSync?q:0);o=new Date()}else{var s=(a.isFunction(n.options.serverSync)?n.options.serverSync.apply(t,[]):null);o=new Date();r=(s?o.getTime()-s.getTime():0);this._serverSyncs.push([n.options.serverSync,r])}var u=n.options.timezone;u=(u==null?-o.getTimezoneOffset():u);if(p||(!p&&n._until==null&&n._since==null)){n._since=n.options.since;if(n._since!=null){n._since=this.UTCDate(u,this._determineTime(n._since,null));if(n._since&&r){n._since.setMilliseconds(n._since.getMilliseconds()+r)}}n._until=this.UTCDate(u,this._determineTime(n.options.until,o));if(r){n._until.setMilliseconds(n._until.getMilliseconds()+r)}}n._show=this._determineShow(n)},_destroyPlugin:function(m){m=a(m);if(!m.hasClass(this.markerClassName)){return}this._removeTarget(m[0]);m.removeClass(this.markerClassName).empty().removeData(this.propertyName)},_pausePlugin:function(m){this._hold(m,"pause")},_lapPlugin:function(m){this._hold(m,"lap")},_resumePlugin:function(m){this._hold(m,null)},_hold:function(p,m){var n=a.data(p,this.propertyName);if(n){if(n._hold=="pause"&&!m){n._periods=n._savePeriods;var o=(n._since?"-":"+");n[n._since?"_since":"_until"]=this._determineTime(o+n._periods[0]+"y"+o+n._periods[1]+"o"+o+n._periods[2]+"w"+o+n._periods[3]+"d"+o+n._periods[4]+"h"+o+n._periods[5]+"m"+o+n._periods[6]+"s");this._addTarget(p)}n._hold=m;n._savePeriods=(m=="pause"?n._periods:null);a.data(p,this.propertyName,n);this._updateCountdown(p,n)}},_getTimesPlugin:function(n){var m=a.data(n,this.propertyName);return(!m?null:(m._hold=="pause"?m._savePeriods:(!m._hold?m._periods:this._calculatePeriods(m,m._show,m.options.significant,new Date()))))},_determineTime:function(p,m){var n=function(r){var s=new Date();s.setTime(s.getTime()+r*1000);return s};var o=function(w){w=w.toLowerCase();var z=new Date();var A=z.getFullYear();var v=z.getMonth();var r=z.getDate();var s=z.getHours();var u=z.getMinutes();var y=z.getSeconds();var x=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g;var t=x.exec(w);while(t){switch(t[2]||"s"){case"s":y+=parseInt(t[1],10);break;case"m":u+=parseInt(t[1],10);break;case"h":s+=parseInt(t[1],10);break;case"d":r+=parseInt(t[1],10);break;case"w":r+=parseInt(t[1],10)*7;break;case"o":v+=parseInt(t[1],10);r=Math.min(r,i._getDaysInMonth(A,v));break;case"y":A+=parseInt(t[1],10);r=Math.min(r,i._getDaysInMonth(A,v));break}t=x.exec(w)}return new Date(A,v,r,s,u,y,0)};var q=(p==null?m:(typeof p=="string"?o(p):(typeof p=="number"?n(p):p)));if(q){q.setMilliseconds(0)}return q},_getDaysInMonth:function(n,m){return 32-new Date(n,m,32).getDate()},_normalLabels:function(m){return m},_generateHTML:function(m){var p=this;m._periods=(m._hold?m._periods:this._calculatePeriods(m,m._show,m.options.significant,new Date()));var u=false;var s=0;var w=m.options.significant;var q=a.extend({},m._show);for(var o=l;o<=j;o++){u|=(m._show[o]=="?"&&m._periods[o]>0);q[o]=(m._show[o]=="?"&&!u?null:m._show[o]);s+=(q[o]?1:0);w-=(m._periods[o]>0?1:0)}var v=[false,false,false,false,false,false,false];for(var o=j;o>=l;o--){if(m._show[o]){if(m._periods[o]){v[o]=true}else{v[o]=w>0;w--}}}var n=(m.options.compact?m.options.compactLabels:m.options.labels);var x=m.options.whichLabels||this._normalLabels;var r=function(z){var y=m.options["compactLabels"+x(m._periods[z])];return(q[z]?p._translateDigits(m,m._periods[z])+(y?y[z]:n[z])+" ":"")};var t=function(z){var y=m.options["labels"+x(m._periods[z])];return((!m.options.significant&&q[z])||(m.options.significant&&v[z])?'<span class="'+i._sectionClass+'"><span class="'+i._amountClass+'">'+p._translateDigits(m,m._periods[z])+"</span><br/>"+(y?y[z]:n[z])+"</span>":"")};return(m.options.layout?this._buildLayout(m,q,m.options.layout,m.options.compact,m.options.significant,v):((m.options.compact?'<span class="'+this._rowClass+" "+this._amountClass+(m._hold?" "+this._holdingClass:"")+'">'+r(l)+r(h)+r(k)+r(c)+(q[e]?this._minDigits(m,m._periods[e],2):"")+(q[g]?(q[e]?m.options.timeSeparator:"")+this._minDigits(m,m._periods[g],2):"")+(q[j]?(q[e]||q[g]?m.options.timeSeparator:"")+this._minDigits(m,m._periods[j],2):""):'<span class="'+this._rowClass+" "+this._showClass+(m.options.significant||s)+(m._hold?" "+this._holdingClass:"")+'">'+t(l)+t(h)+t(k)+t(c)+t(e)+t(g)+t(j))+"</span>"+(m.options.description?'<span class="'+this._rowClass+" "+this._descrClass+'">'+m.options.description+"</span>":"")))},_buildLayout:function(q,w,t,m,y,x){var s=q.options[m?"compactLabels":"labels"];var A=q.options.whichLabels||this._normalLabels;var r=function(B){return(q.options[(m?"compactLabels":"labels")+A(q._periods[B])]||s)[B]};var n=function(C,B){return q.options.digits[Math.floor(C/B)%10]};var z={desc:q.options.description,sep:q.options.timeSeparator,yl:r(l),yn:this._minDigits(q,q._periods[l],1),ynn:this._minDigits(q,q._periods[l],2),ynnn:this._minDigits(q,q._periods[l],3),y1:n(q._periods[l],1),y10:n(q._periods[l],10),y100:n(q._periods[l],100),y1000:n(q._periods[l],1000),ol:r(h),on:this._minDigits(q,q._periods[h],1),onn:this._minDigits(q,q._periods[h],2),onnn:this._minDigits(q,q._periods[h],3),o1:n(q._periods[h],1),o10:n(q._periods[h],10),o100:n(q._periods[h],100),o1000:n(q._periods[h],1000),wl:r(k),wn:this._minDigits(q,q._periods[k],1),wnn:this._minDigits(q,q._periods[k],2),wnnn:this._minDigits(q,q._periods[k],3),w1:n(q._periods[k],1),w10:n(q._periods[k],10),w100:n(q._periods[k],100),w1000:n(q._periods[k],1000),dl:r(c),dn:this._minDigits(q,q._periods[c],1),dnn:this._minDigits(q,q._periods[c],2),dnnn:this._minDigits(q,q._periods[c],3),d1:n(q._periods[c],1),d10:n(q._periods[c],10),d100:n(q._periods[c],100),d1000:n(q._periods[c],1000),hl:r(e),hn:this._minDigits(q,q._periods[e],1),hnn:this._minDigits(q,q._periods[e],2),hnnn:this._minDigits(q,q._periods[e],3),h1:n(q._periods[e],1),h10:n(q._periods[e],10),h100:n(q._periods[e],100),h1000:n(q._periods[e],1000),ml:r(g),mn:this._minDigits(q,q._periods[g],1),mnn:this._minDigits(q,q._periods[g],2),mnnn:this._minDigits(q,q._periods[g],3),m1:n(q._periods[g],1),m10:n(q._periods[g],10),m100:n(q._periods[g],100),m1000:n(q._periods[g],1000),sl:r(j),sn:this._minDigits(q,q._periods[j],1),snn:this._minDigits(q,q._periods[j],2),snnn:this._minDigits(q,q._periods[j],3),s1:n(q._periods[j],1),s10:n(q._periods[j],10),s100:n(q._periods[j],100),s1000:n(q._periods[j],1000)};var o=t;for(var p=l;p<=j;p++){var u="yowdhms".charAt(p);var v=new RegExp("\\{"+u+"<\\}(.*)\\{"+u+">\\}","g");o=o.replace(v,((!y&&w[p])||(y&&x[p])?"$1":""))}a.each(z,function(B,D){var C=new RegExp("\\{"+B+"\\}","g");o=o.replace(C,D)});return o},_minDigits:function(m,o,n){o=""+o;if(o.length>=n){return this._translateDigits(m,o)}o="0000000000"+o;return this._translateDigits(m,o.substr(o.length-n))},_translateDigits:function(m,n){return(""+n).replace(/[0-9]/g,function(o){return m.options.digits[o]})},_determineShow:function(n){var m=n.options.format;var o=[];o[l]=(m.match("y")?"?":(m.match("Y")?"!":null));o[h]=(m.match("o")?"?":(m.match("O")?"!":null));o[k]=(m.match("w")?"?":(m.match("W")?"!":null));o[c]=(m.match("d")?"?":(m.match("D")?"!":null));o[e]=(m.match("h")?"?":(m.match("H")?"!":null));o[g]=(m.match("m")?"?":(m.match("M")?"!":null));o[j]=(m.match("s")?"?":(m.match("S")?"!":null));return o},_calculatePeriods:function(p,B,C,x){p._now=x;p._now.setMilliseconds(0);var D=new Date(p._now.getTime());if(p._since){if(x.getTime()<p._since.getTime()){p._now=x=D}else{x=p._since}}else{D.setTime(p._until.getTime());if(x.getTime()>p._until.getTime()){p._now=x=D}}var z=[0,0,0,0,0,0,0];if(B[l]||B[h]){var r=i._getDaysInMonth(x.getFullYear(),x.getMonth());var t=i._getDaysInMonth(D.getFullYear(),D.getMonth());var A=(D.getDate()==x.getDate()||(D.getDate()>=Math.min(r,t)&&x.getDate()>=Math.min(r,t)));var o=function(F){return(F.getHours()*60+F.getMinutes())*60+F.getSeconds()};var v=Math.max(0,(D.getFullYear()-x.getFullYear())*12+D.getMonth()-x.getMonth()+((D.getDate()<x.getDate()&&!A)||(A&&o(D)<o(x))?-1:0));z[l]=(B[l]?Math.floor(v/12):0);z[h]=(B[h]?v-z[l]*12:0);x=new Date(x.getTime());var E=(x.getDate()==r);var q=i._getDaysInMonth(x.getFullYear()+z[l],x.getMonth()+z[h]);if(x.getDate()>q){x.setDate(q)}x.setFullYear(x.getFullYear()+z[l]);x.setMonth(x.getMonth()+z[h]);if(E){x.setDate(q)}}var m=Math.floor((D.getTime()-x.getTime())/1000);var n=function(G,F){z[G]=(B[G]?Math.floor(m/F):0);m-=z[G]*F};n(k,604800);n(c,86400);n(e,3600);n(g,60);n(j,1);if(m>0&&!p._since){var w=[1,12,4.3482,7,24,60,60];var s=j;var u=1;for(var y=j;y>=l;y--){if(B[y]){if(z[s]>=u){z[s]=0;m=1}if(m>0){z[y]++;m=0;s=y;u=1}}u*=w[y]}}if(C){for(var y=l;y<=j;y++){if(C&&z[y]){C--}else{if(!C){z[y]=0}}}}return z}});var d=["getTimes"];function f(m,n){if(m=="option"&&(n.length==0||(n.length==1&&typeof n[0]=="string"))){return true}return a.inArray(m,d)>-1}a.fn.countdown=function(m){var n=Array.prototype.slice.call(arguments,1);if(f(m,n)){return i["_"+m+"Plugin"].apply(i,[this[0]].concat(n))}return this.each(function(){if(typeof m=="string"){if(!i["_"+m+"Plugin"]){throw"Unknown command: "+m}i["_"+m+"Plugin"].apply(i,[this].concat(n))}else{i._attachPlugin(this,m||{})}})};var i=a.countdown=new b()})(jQuery);