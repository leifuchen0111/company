var Inbox=function(){var a=$(".inbox-content");var i=$(".inbox-loading");var h=function(m){var o="inbox_inbox.html";var n=$(".inbox-nav > li."+m+" a").attr("data-title");i.show();a.html("");$.post(o,{},function(p){$(".inbox-nav > li.active").removeClass("active");$(".inbox-nav > li."+m).addClass("active");$(".inbox-header > h1").text(n);i.hide();a.html(p);App.fixContentHeight();App.initUniform()})};var j=function(m,n){var o="inbox_view.html";i.show();a.html("");$.post(o,{},function(p){if(n){$(".inbox-nav > li.active").removeClass("active")}$(".inbox-header > h1").text("View Message");i.hide();a.html(p);App.fixContentHeight();App.initUniform()})};var e=function(m){m.tag({autosizedInput:true,containerClasses:"span12",inputClasses:"m-wrap",source:function(o,n){return["Bob Nilson <bob.nilson@metronic.com>","Lisa Miller <lisa.miller@metronic.com>","Test <test@domain.com>","Dino <dino@demo.com>","Support <support@demo.com>"]}})};var f=function(){$(".inbox-wysihtml5").wysihtml5({stylesheets:["assets/plugins/bootstrap-wysihtml5/wysiwyg-color.css"]})};var d=function(){$("#fileupload").fileupload({url:"assets/plugins/jquery-file-upload/server/php/",autoUpload:true});if($.support.cors){$.ajax({url:"assets/plugins/jquery-file-upload/server/php/",type:"HEAD"}).fail(function(){$('<span class="alert alert-error"/>').text("Upload server currently unavailable - "+new Date()).appendTo("#fileupload")})}};var g=function(){var m="inbox_compose.html";i.show();a.html("");$.post(m,{},function(n){$(".inbox-nav > li.active").removeClass("active");$(".inbox-header > h1").text("Compose");i.hide();a.html(n);e($('[name="to"]'));d();f();$(".inbox-wysihtml5").focus();App.fixContentHeight();App.initUniform()})};var k=function(){var m="inbox_reply.html";i.show();a.html("");$.post(m,{},function(n){$(".inbox-nav > li.active").removeClass("active");$(".inbox-header > h1").text("Reply");i.hide();a.html(n);$('[name="message"]').val($("#reply_email_content_body").html());e($('[name="to"]'));c();d();f();App.fixContentHeight();App.initUniform()})};var l=function(){var m="inbox_search_result.html";i.show();a.html("");$.post(m,{},function(n){$(".inbox-nav > li.active").removeClass("active");$(".inbox-header > h1").text("Search");i.hide();a.html(n);App.fixContentHeight();App.initUniform()})};var c=function(){var n=$(".inbox-compose .mail-to .inbox-cc");var m=$(".inbox-compose .input-cc");n.hide();m.show();e($('[name="cc"]'),-10);$(".close",m).click(function(){m.hide();n.show()})};var b=function(){var n=$(".inbox-compose .mail-to .inbox-bcc");var m=$(".inbox-compose .input-bcc");n.hide();m.show();e($('[name="bcc"]'),-10);$(".close",m).click(function(){m.hide();n.show()})};return{init:function(){$(".inbox .compose-btn a").live("click",function(){g()});$(".inbox .reply-btn").live("click",function(){k()});$(".inbox-content .view-message").live("click",function(){j()});$(".inbox-nav > li.inbox > a").click(function(){h("inbox")});$(".inbox-nav > li.sent > a").click(function(){h("sent")});$(".inbox-nav > li.draft > a").click(function(){h("draft")});$(".inbox-nav > li.trash > a").click(function(){h("trash")});$(".inbox-compose .mail-to .inbox-cc").live("click",function(){c()});$(".inbox-compose .mail-to .inbox-bcc").live("click",function(){b()});if(App.getURLParameter("a")==="view"){j()}else{if(App.getURLParameter("a")==="compose"){g()}else{h("inbox")}}}}}();