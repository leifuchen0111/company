!function(a){var b=function(g,n,e){var i=typeof n=="object";var m;this.startDate=Date.today();this.endDate=Date.today();this.minDate=false;this.maxDate=false;this.changed=false;this.ranges={};this.opens="right";this.cb=function(){};this.format="MM/dd/yyyy";this.separator=" - ";this.showWeekNumbers=false;this.buttonClasses=["btn-success"];this.locale={applyLabel:"Apply",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:Date.CultureInfo.shortestDayNames,monthNames:Date.CultureInfo.monthNames,firstDay:0};m=this.locale;this.leftCalendar={month:Date.today().set({day:1,month:this.startDate.getMonth(),year:this.startDate.getFullYear()}),calendar:Array()};this.rightCalendar={month:Date.today().set({day:1,month:this.endDate.getMonth(),year:this.endDate.getFullYear()}),calendar:Array()};this.parentEl="body";this.element=a(g);if(this.element.hasClass("pull-right")){this.opens="left"}if(this.element.is("input")){this.element.on({click:a.proxy(this.show,this),focus:a.proxy(this.show,this)})}else{this.element.on("click",a.proxy(this.show,this))}if(i){if(typeof n.locale=="object"){a.each(m,function(c,r){m[c]=n.locale[c]||r})}}var f='<div class="daterangepicker dropdown-menu"><div class="calendar left"></div><div class="calendar right"></div><div class="ranges"><div class="range_inputs"><div><label for="daterangepicker_start">'+this.locale.fromLabel+'</label><input class="m-wrap input-mini" type="text" name="daterangepicker_start" value="" disabled="disabled" /></div><div><label for="daterangepicker_end">'+this.locale.toLabel+'</label><input class="m-wrap input-mini" type="text" name="daterangepicker_end" value="" disabled="disabled" /></div><button class="btn " disabled="disabled">'+this.locale.applyLabel+"</button></div></div></div>";this.parentEl=(i&&n.parentEl&&a(n.parentEl))||a(this.parentEl);this.container=a(f).appendTo(this.parentEl);if(i){if(typeof n.format=="string"){this.format=n.format}if(typeof n.separator=="string"){this.separator=n.separator}if(typeof n.startDate=="string"){this.startDate=Date.parse(n.startDate,this.format)}if(typeof n.endDate=="string"){this.endDate=Date.parse(n.endDate,this.format)}if(typeof n.minDate=="string"){this.minDate=Date.parse(n.minDate,this.format)}if(typeof n.maxDate=="string"){this.maxDate=Date.parse(n.maxDate,this.format)}if(typeof n.startDate=="object"){this.startDate=n.startDate}if(typeof n.endDate=="object"){this.endDate=n.endDate}if(typeof n.minDate=="object"){this.minDate=n.minDate}if(typeof n.maxDate=="object"){this.maxDate=n.maxDate}if(typeof n.ranges=="object"){for(var o in n.ranges){var q=n.ranges[o][0];var h=n.ranges[o][1];if(typeof q=="string"){q=Date.parse(q)}if(typeof h=="string"){h=Date.parse(h)}if(this.minDate&&q<this.minDate){q=this.minDate}if(this.maxDate&&h>this.maxDate){h=this.maxDate}if((this.minDate&&h<this.minDate)||(this.maxDate&&q>this.maxDate)){continue}this.ranges[o]=[q,h]}var l="<ul>";for(var o in this.ranges){l+="<li>"+o+"</li>"}l+="<li>"+this.locale.customRangeLabel+"</li>";l+="</ul>";this.container.find(".ranges").prepend(l)}if(typeof n.locale=="object"){if(typeof n.locale.firstDay=="number"){this.locale.firstDay=n.locale.firstDay;var j=n.locale.firstDay;while(j>0){this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift());j--}}}if(typeof n.opens=="string"){this.opens=n.opens}if(typeof n.showWeekNumbers=="boolean"){this.showWeekNumbers=n.showWeekNumbers}if(typeof n.buttonClasses=="string"){this.buttonClasses=[n.buttonClasses]}if(typeof n.buttonClasses=="object"){this.buttonClasses=n.buttonClasses}}var d=this.container;a.each(this.buttonClasses,function(c,r){d.find("button").addClass(r)});if(this.opens=="right"){var k=this.container.find(".calendar.left");var p=this.container.find(".calendar.right");k.removeClass("left").addClass("right");p.removeClass("right").addClass("left")}if(typeof n=="undefined"||typeof n.ranges=="undefined"){this.container.find(".calendar").show()}if(typeof e=="function"){this.cb=e}this.container.addClass("opens"+this.opens);this.container.on("mousedown",a.proxy(this.mousedown,this));this.container.find(".calendar").on("click",".prev",a.proxy(this.clickPrev,this));this.container.find(".calendar").on("click",".next",a.proxy(this.clickNext,this));this.container.find(".ranges").on("click","button",a.proxy(this.clickApply,this));this.container.find(".calendar").on("click","td.available",a.proxy(this.clickDate,this));this.container.find(".calendar").on("mouseenter","td.available",a.proxy(this.enterDate,this));this.container.find(".calendar").on("mouseleave","td.available",a.proxy(this.updateView,this));this.container.find(".ranges").on("click","li",a.proxy(this.clickRange,this));this.container.find(".ranges").on("mouseenter","li",a.proxy(this.enterRange,this));this.container.find(".ranges").on("mouseleave","li",a.proxy(this.updateView,this));this.element.on("keyup",a.proxy(this.updateFromControl,this));this.updateView();this.updateCalendars()};b.prototype={constructor:b,mousedown:function(c){c.stopPropagation();c.preventDefault()},updateView:function(){this.leftCalendar.month.set({month:this.startDate.getMonth(),year:this.startDate.getFullYear()});this.rightCalendar.month.set({month:this.endDate.getMonth(),year:this.endDate.getFullYear()});this.container.find("input[name=daterangepicker_start]").val(this.startDate.toString(this.format));this.container.find("input[name=daterangepicker_end]").val(this.endDate.toString(this.format));if(this.startDate.equals(this.endDate)||this.startDate.isBefore(this.endDate)){this.container.find("button").removeAttr("disabled")}else{this.container.find("button").attr("disabled","disabled")}},updateFromControl:function(){if(!this.element.is("input")){return}var c=this.element.val().split(this.separator);var e=Date.parseExact(c[0],this.format);var d=Date.parseExact(c[1],this.format);if(e==null||d==null){return}if(d.isBefore(e)){return}this.startDate=e;this.endDate=d;this.updateView();this.cb(this.startDate,this.endDate);this.updateCalendars()},notify:function(){this.updateView();if(this.element.is("input")){this.element.val(this.startDate.toString(this.format)+this.separator+this.endDate.toString(this.format))}this.cb(this.startDate,this.endDate)},move:function(){var c={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()};if(this.opens=="left"){this.container.css({top:this.element.offset().top+this.element.outerHeight(),right:a(window).width()-this.element.offset().left-this.element.outerWidth()-c.left,left:"auto"})}else{this.container.css({top:this.element.offset().top+this.element.outerHeight(),left:this.element.offset().left-c.left,right:"auto"})}},show:function(c){this.container.show();this.move();if(c){c.stopPropagation();c.preventDefault()}this.changed=false;a(document).on("mousedown",a.proxy(this.hide,this))},hide:function(c){this.container.hide();a(document).off("mousedown",this.hide);if(this.changed){this.changed=false;this.notify()}},enterRange:function(d){var f=d.target.innerHTML;if(f==this.locale.customRangeLabel){this.updateView()}else{var c=this.ranges[f];this.container.find("input[name=daterangepicker_start]").val(c[0].toString(this.format));this.container.find("input[name=daterangepicker_end]").val(c[1].toString(this.format))}},clickRange:function(d){var f=d.target.innerHTML;if(f==this.locale.customRangeLabel){this.container.find(".calendar").show()}else{var c=this.ranges[f];this.startDate=c[0];this.endDate=c[1];this.leftCalendar.month.set({month:this.startDate.getMonth(),year:this.startDate.getFullYear()});this.rightCalendar.month.set({month:this.endDate.getMonth(),year:this.endDate.getFullYear()});this.updateCalendars();this.changed=true;this.container.find(".calendar").hide();this.hide()}},clickPrev:function(d){var c=a(d.target).parents(".calendar");if(c.hasClass("left")){this.leftCalendar.month.add({months:-1})}else{this.rightCalendar.month.add({months:-1})}this.updateCalendars()},clickNext:function(d){var c=a(d.target).parents(".calendar");if(c.hasClass("left")){this.leftCalendar.month.add({months:1})}else{this.rightCalendar.month.add({months:1})}this.updateCalendars()},enterDate:function(f){var h=a(f.target).attr("title");var g=h.substr(1,1);var d=h.substr(3,1);var c=a(f.target).parents(".calendar");if(c.hasClass("left")){this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[g][d].toString(this.format))}else{this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[g][d].toString(this.format))}},clickDate:function(f){var h=a(f.target).attr("title");var g=h.substr(1,1);var d=h.substr(3,1);var c=a(f.target).parents(".calendar");if(c.hasClass("left")){startDate=this.leftCalendar.calendar[g][d];endDate=this.endDate}else{startDate=this.startDate;endDate=this.rightCalendar.calendar[g][d]}c.find("td").removeClass("active");if(startDate.equals(endDate)||startDate.isBefore(endDate)){a(f.target).addClass("active");if(!startDate.equals(this.startDate)||!endDate.equals(this.endDate)){this.changed=true}this.startDate=startDate;this.endDate=endDate}this.leftCalendar.month.set({month:this.startDate.getMonth(),year:this.startDate.getFullYear()});this.rightCalendar.month.set({month:this.endDate.getMonth(),year:this.endDate.getFullYear()});this.updateCalendars()},clickApply:function(c){this.hide()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.getMonth(),this.leftCalendar.month.getFullYear());this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.getMonth(),this.rightCalendar.month.getFullYear());this.container.find(".calendar.left").html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.endDate));this.container.find(".calendar.right").html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.startDate,this.maxDate))},buildCalendar:function(n,q){var j=Date.today().set({day:1,month:n,year:q});var l=j.clone().add(-1).day().getMonth();var m=j.clone().add(-1).day().getFullYear();var h=Date.getDaysInMonth(q,n);var g=Date.getDaysInMonth(m,l);var f=j.getDay();var c=Array();for(var k=0;k<6;k++){c[k]=Array()}var p=g-f+this.locale.firstDay+1;if(p>g){p-=7}if(f==this.locale.firstDay){p=g-6}var e=Date.today().set({day:p,month:l,year:m});for(var k=0,d=0,o=0;k<42;k++,d++,e=e.clone().add(1).day()){if(k>0&&d%7==0){d=0;o++}c[o][d]=e}return c},renderCalendar:function(c,j,h,g){var f='<table class="table-condensed">';f+="<thead>";f+="<tr>";if(this.showWeekNumbers){f+="<th></th>"}if(!h||h<c[1][1]){f+='<th class="prev available"><i class="icon-angle-left"></i></th>'}else{f+="<th></th>"}f+='<th colspan="5" style="width: auto">'+this.locale.monthNames[c[1][1].getMonth()]+c[1][1].toString(" yyyy")+"</th>";if(!g||g>c[1][1]){f+='<th class="next available"><i class="icon-angle-right"></i></th>'}else{f+="<th></th>"}f+="</tr>";f+="<tr>";if(this.showWeekNumbers){f+='<th class="week">'+this.locale.weekLabel+"</th>"}a.each(this.locale.daysOfWeek,function(m,l){f+="<th>"+l+"</th>"});f+="</tr>";f+="</thead>";f+="<tbody>";for(var i=0;i<6;i++){f+="<tr>";if(this.showWeekNumbers){f+='<td class="week">'+c[i][0].getWeek()+"</td>"}for(var e=0;e<7;e++){var d="available ";d+=(c[i][e].getMonth()==c[1][1].getMonth())?"":"off";j.setHours(0,0,0,0);if((h&&c[i][e]<h)||(g&&c[i][e]>g)){d="off disabled"}else{if(c[i][e].equals(j)){d+="active"}}var k="r"+i+"c"+e;f+='<td class="'+d+'" title="'+k+'">'+c[i][e].getDate()+"</td>"}f+="</tr>"}f+="</tbody>";f+="</table>";return f}};a.fn.daterangepicker=function(d,c){this.each(function(){var e=a(this);if(!e.data("daterangepicker")){e.data("daterangepicker",new b(e,d,c))}});return this}}(window.jQuery);