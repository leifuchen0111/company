!function(a){var b=function(c,d){this.init(c,d)};b.prototype={constructor:b,init:function(c,e){this.options=e;this.$element=a(c).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote);var d=typeof this.options.manager==="function"?this.options.manager.call(this):this.options.manager;d=d.appendModal?d:a(d).modalmanager().data("modalmanager");d.appendModal(this)},toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var c=a.Event("show");if(this.isShown){return}this.$element.trigger(c);if(c.isDefaultPrevented()){return}this.escape();this.tab();this.options.loading&&this.loading()},hide:function(c){c&&c.preventDefault();c=a.Event("hide");this.$element.trigger(c);if(!this.isShown||c.isDefaultPrevented()){return(this.isShown=false)}this.isShown=false;this.escape();this.tab();this.isLoading&&this.loading();a(document).off("focusin.modal");this.$element.removeClass("in").removeClass("animated").removeClass(this.options.attentionAnimation).removeClass("modal-overflow").attr("aria-hidden",true);a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},layout:function(){var d=this.options.height?"height":"max-height",f=this.options.height||this.options.maxHeight;if(this.options.width){this.$element.css("width",this.options.width);var e=this;this.$element.css("margin-left",function(){if(/%/ig.test(e.options.width)){return -(parseInt(e.options.width)/2)+"%"}else{return -(a(this).width()/2)+"px"}})}else{this.$element.css("width","");this.$element.css("margin-left","")}this.$element.find(".modal-body").css("overflow","").css(d,"");if(f){this.$element.find(".modal-body").css("overflow","auto").css(d,f)}var c=a(window).height()-10<this.$element.height();if(c||this.options.modalOverflow){this.$element.css("margin-top",0).addClass("modal-overflow")}else{this.$element.css("margin-top",0-this.$element.height()/2).removeClass("modal-overflow")}},tab:function(){var c=this;if(this.isShown&&this.options.consumeTab){this.$element.on("keydown.tabindex.modal","[data-tabindex]",function(g){if(g.keyCode&&g.keyCode==9){var d=a(this),f=a(this);c.$element.find("[data-tabindex]:enabled:not([readonly])").each(function(h){if(!h.shiftKey){d=d.data("tabindex")<a(this).data("tabindex")?d=a(this):f=a(this)}else{d=d.data("tabindex")>a(this).data("tabindex")?d=a(this):f=a(this)}});d[0]!==a(this)[0]?d.focus():f.focus();g.preventDefault()}})}else{if(!this.isShown){this.$element.off("keydown.tabindex.modal")}}},escape:function(){var c=this;if(this.isShown&&this.options.keyboard){if(!this.$element.attr("tabindex")){this.$element.attr("tabindex",-1)}this.$element.on("keyup.dismiss.modal",function(d){d.which==27&&c.hide()})}else{if(!this.isShown){this.$element.off("keyup.dismiss.modal")}}},hideWithTransition:function(){var c=this,d=setTimeout(function(){c.$element.off(a.support.transition.end);c.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(d);c.hideModal()})},hideModal:function(){var c=this.options.height?"height":"max-height";var d=this.options.height||this.options.maxHeight;if(d){this.$element.find(".modal-body").css("overflow","").css(c,"")}this.$element.hide().trigger("hidden")},removeLoading:function(){this.$loading.remove();this.$loading=null;this.isLoading=false},loading:function(d){d=d||function(){};var c=this.$element.hasClass("fade")?"fade":"";if(!this.isLoading){var e=a.support.transition&&c;this.$loading=a('<div class="loading-mask '+c+'">').append(this.options.spinner).appendTo(this.$element);if(e){this.$loading[0].offsetWidth}this.$loading.addClass("in");this.isLoading=true;e?this.$loading.one(a.support.transition.end,d):d()}else{if(this.isLoading&&this.$loading){this.$loading.removeClass("in");var f=this;a.support.transition&&this.$element.hasClass("fade")?this.$loading.one(a.support.transition.end,function(){f.removeLoading()}):f.removeLoading()}else{if(d){d(this.isLoading)}}}},focus:function(){var c=this.$element.find(this.options.focusOn);c=c.length?c:this.$element;c.focus()},attention:function(){if(this.options.attentionAnimation){this.$element.removeClass("animated").removeClass(this.options.attentionAnimation);var c=this;setTimeout(function(){c.$element.addClass("animated").addClass(c.options.attentionAnimation)},0)}this.focus()},destroy:function(){var c=a.Event("destroy");this.$element.trigger(c);if(c.isDefaultPrevented()){return}this.teardown()},teardown:function(){if(!this.$parent.length){this.$element.remove();this.$element=null;return}if(this.$parent!==this.$element.parent()){this.$element.appendTo(this.$parent)}this.$element.off(".modal");this.$element.removeData("modal");this.$element.removeClass("in").attr("aria-hidden",true)}};a.fn.modal=function(d,c){return this.each(function(){var e=a(this),f=e.data("modal"),g=a.extend({},a.fn.modal.defaults,e.data(),typeof d=="object"&&d);if(!f){e.data("modal",(f=new b(this,g)))}if(typeof d=="string"){f[d].apply(f,[].concat(c))}else{if(g.show){f.show()}}})};a.fn.modal.defaults={keyboard:true,backdrop:true,loading:false,show:true,width:null,height:null,maxHeight:null,modalOverflow:false,consumeTab:true,focusOn:null,replace:false,resize:false,attentionAnimation:"shake",manager:"body",spinner:'<div class="loading-spinner" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>'};a.fn.modal.Constructor=b;a(function(){a(document).off("click.modal").on("click.modal.data-api",'[data-toggle="modal"]',function(f){var d=a(this),g=d.attr("href"),c=a(d.attr("data-target")||(g&&g.replace(/.*(?=#[^\s]+$)/,""))),h=c.data("modal")?"toggle":a.extend({remote:!/#/.test(g)&&g},c.data(),d.data());f.preventDefault();c.modal(h).one("hide",function(){d.focus()})})})}(window.jQuery);