var Login = function() {
    return {
        init: function() {
            $(".login-form").validate({
                errorElement: "label",
                errorClass: "help-inline",
                focusInvalid: false,
                rules: {
                    username: {
                        required: true
                    },
                    password: {
                        required: true
                    },
                    remember: {
                        required: false
                    }
                },
                messages: {
                    username: {
                        required: "Username is required."
                    },
                    password: {
                        required: "Password is required."
                    }
                },
                invalidHandler: function(a, b) {
                    $(".alert-error", $(".login-form")).show()
                },
                highlight: function(a) {
                    $(a).closest(".control-group").addClass("error")
                },
                success: function(a) {
                    a.closest(".control-group").removeClass("error");
                    a.remove()
                },
                errorPlacement: function(b, a) {
                    b.addClass("help-small no-left-padding").insertAfter(a.closest(".input-icon"))
                },
                submitHandler: function(a) {
                    window.location.href = "index.html"
                }
            });
            $(".login-form input").keypress(function(a) {
                if (a.which == 13) {
                    if ($(".login-form").validate().form()) {
                        window.location.href = "index.html"
                    }
                    return false
                }
            });
            $(".forget-form").validate({
                errorElement: "label",
                errorClass: "help-inline",
                focusInvalid: false,
                ignore: "",
                rules: {
                    email: {
                        required: true,
                        email: true
                    }
                },
                messages: {
                    email: {
                        required: "Email is required."
                    }
                },
                invalidHandler: function(a, b) {},
                highlight: function(a) {
                    $(a).closest(".control-group").addClass("error")
                },
                success: function(a) {
                    a.closest(".control-group").removeClass("error");
                    a.remove()
                },
                errorPlacement: function(b, a) {
                    b.addClass("help-small no-left-padding").insertAfter(a.closest(".input-icon"))
                },
                submitHandler: function(a) {
                    window.location.href = "index.html"
                }
            });
            $(".forget-form input").keypress(function(a) {
                if (a.which == 13) {
                    if ($(".forget-form").validate().form()) {
                        window.location.href = "index.html"
                    }
                    return false
                }
            });
            jQuery("#forget-password").click(function() {
                jQuery(".login-form").hide();
                jQuery(".forget-form").show()
            });
            jQuery("#back-btn").click(function() {
                jQuery(".login-form").show();
                jQuery(".forget-form").hide()
            });
            $(".register-form").validate({
                errorElement: "label",
                errorClass: "help-inline",
                focusInvalid: false,
                ignore: "",
                rules: {
                    username: {
                        required: true
                    },
                    password: {
                        required: true
                    },
                    rpassword: {
                        equalTo: "#register_password"
                    },
                    email: {
                        required: true,
                        email: true
                    },
                    tnc: {
                        required: true
                    }
                },
                messages: {
                    tnc: {
                        required: "Please accept TNC first."
                    }
                },
                invalidHandler: function(a, b) {},
                highlight: function(a) {
                    $(a).closest(".control-group").addClass("error")
                },
                success: function(a) {
                    a.closest(".control-group").removeClass("error");
                    a.remove()
                },
                errorPlacement: function(b, a) {
                    if (a.attr("name") == "tnc") {
                        b.addClass("help-small no-left-padding").insertAfter($("#register_tnc_error"))
                    } else {
                        b.addClass("help-small no-left-padding").insertAfter(a.closest(".input-icon"))
                    }
                },
                submitHandler: function(a) {
                    window.location.href = "index.html"
                }
            });
            jQuery("#register-btn").click(function() {
                jQuery(".login-form").hide();
                jQuery(".register-form").show()
            });
            jQuery("#register-back-btn").click(function() {
                jQuery(".login-form").show();
                jQuery(".register-form").hide()
            })
        }
    }
} ();